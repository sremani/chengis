apiVersion: v1
kind: ConfigMap
metadata:
  name: chengis-config
  namespace: chengis
  labels:
    app.kubernetes.io/name: chengis
data:
  # Database (PostgreSQL for production)
  CHENGIS_DATABASE_TYPE: "postgresql"
  CHENGIS_DATABASE_HOST: "postgresql"
  CHENGIS_DATABASE_PORT: "5432"
  CHENGIS_DATABASE_NAME: "chengis"
  CHENGIS_DATABASE_USER: "chengis"

  # Server
  CHENGIS_SERVER_PORT: "8080"
  CHENGIS_SERVER_HOST: "0.0.0.0"

  # Paths (PVC-backed)
  CHENGIS_WORKSPACE_ROOT: "/data/workspaces"
  CHENGIS_ARTIFACTS_ROOT: "/data/artifacts"

  # Auth
  CHENGIS_AUTH_ENABLED: "true"

  # Distributed builds
  CHENGIS_DISTRIBUTED_ENABLED: "true"
  CHENGIS_DISTRIBUTED_DISPATCH_QUEUE_ENABLED: "true"

  # HA â€” leader election for singleton services
  CHENGIS_HA_ENABLED: "true"
  CHENGIS_HA_LEADER_POLL_MS: "15000"

  # Metrics
  CHENGIS_METRICS_ENABLED: "true"

  # Retention
  CHENGIS_RETENTION_ENABLED: "true"

  # Logging
  CHENGIS_LOG_LEVEL: ":info"
  CHENGIS_LOG_FORMAT: ":text"
